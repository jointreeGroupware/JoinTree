<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goodee.JoinTree.mapper.MeetRoomMapper">

	<!-- 회의실 이름 중복검사 -->
	<select id="selectRoomName" resultType="int">
    	SELECT
    	COUNT(*)
    	FROM meeting_room
    	<where>
    	room_name = #{roomName}
    	</where>
	</select>
	
	<!-- 경영지원 회의실 목록 조회 -->
	<select id="selectMeetRoomAll" parameterType="java.util.Map" resultType="com.goodee.JoinTree.vo.MeetingRoom">
		SELECT
			room_no roomNo,
			equip_category equipCategory,
			room_name roomName,
			room_Capacity roomCapacity,
			room_status roomStatus,
			createdate,
			updatedate,
			create_id createId,
			update_id updateId
		FROM meeting_room
		WHERE equip_category = 'E0101'
		ORDER BY createdate DESC;
	</select>
	
	<!-- 경영지원 회의실 추가 / 공통코드 사용-->
	<insert id="insertMeetRoom" parameterType="com.goodee.JoinTree.vo.MeetingRoom" >
	    <selectKey order="AFTER" keyProperty="roomNo" resultType="int">
	        SELECT last_insert_id()
	    </selectKey>
	    INSERT INTO meeting_room(
	        equip_category,
	        emp_no,
	        room_name,
	        room_capacity,
	        room_status,
	        createdate,
	        updatedate,
	        create_id,
	        update_id
	    )
	    VALUES(
	        #{equipCategory},
	        #{empNo},
	        #{roomName},
	        #{roomCapacity},
	        #{roomStatus},
	        NOW(),
	        NOW(),
	        #{empNo},
	        #{empNo}
	    )
	</insert>
	
	<!-- 회의실 수정 create_id.... 추가 해야함  update_id = #{updateId}-->
	<update id="updateMeetRoom" parameterType="com.goodee.JoinTree.vo.MeetingRoom">
	    UPDATE meeting_room
	    SET room_name = #{roomName},
	        room_capacity = #{roomCapacity},
	        room_status = #{roomStatus},
	        updatedate = NOW()
	    WHERE room_no = #{roomNo}
	</update>
	
	<!-- 비품 상세 -->
	<select id="selectMeetRoomOne" parameterType="com.goodee.JoinTree.vo.MeetingRoom" resultType="com.goodee.JoinTree.vo.MeetingRoom">
		SELECT
			room_no roomNo,
			equip_category equipCategory,
			emp_no empNo,
			room_name roomName,
			room_Capacity roomCapacity,
			room_status roomStatus,
			createdate,
			updatedate,
			create_id createId,
			update_id updateId
		FROM meeting_room
		WHERE room_no = #{roomNo}
	</select>
	
	<!-- 삭제 AND member_id = #{memberId}-->
	<delete id="deleteMeetRoom" parameterType="com.goodee.JoinTree.vo.MeetingRoom">
		DELETE FROM meeting_room
		WHERE room_no = #{roomNo}
	</delete>
</mapper>